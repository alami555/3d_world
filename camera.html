
<!doctype html>
<html>
<body>
  <video id="my-video">
    
  </video>
  <button id='bo'>play audio..</button>
  <script>

    function playStream(element, stream) {
        var handleLoaded = function() {
            element.removeEventListener('loadedmetadata', handleLoaded);
            element.play();
        };
        element.addEventListener('loadedmetadata', handleLoaded);
        element.srcObject = stream;
    }
    var xp = ''
    function playCamera(element, preferedWidth, preferedHeight) {
        var devices = navigator.mediaDevices;
        if (devices && 'getUserMedia' in devices) {
            var constraints = {
                video: {
                    width: preferedWidth,
                    height: preferedHeight,
               
                },
                // you can use microphone adding `audio: true` property here
              audio: xp ,
              
               playaudio:(t)=>{
                var w =  xp = t;
                 
               return w;
               }
                 
            };

bo.onclick = constraints.playaudio(true)
          
            var promise = devices.getUserMedia(constraints);
            promise
                .then(function(stream) {
                    playStream(element, stream)    
                })
                .catch(function(error) {
                    console.error(error.name + ': ' + error.message);
                });
        } else {
            console.error('Camera API is not supported.');
        }
    }
    
    
    // Usage example:
    
    var element = document.querySelector('#my-video');
    
    playCamera(element, 0, 0);

    element.height = window.innerHeight;
    element.width = window.innerWidth;

    

  </script>
</body>
</html>
